## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–°–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è URL-–∞–¥—Ä–µ—Å–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é:
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–æ–∑–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –ü—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–æ–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python + FastAPI
- PostgreSQL (–æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- Redis (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- Docker (—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)

## API Endpoints

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### POST `/register`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è   

```bash
curl -X POST "https://shortlink-zv2s.onrender.com/register" \
-H "Content-Type: application/json" \
-d '{"email": "user@example.com", "password": "securepassword"}'
```


#### POST  `/token`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞

```bash
curl -X POST "https://shortlink-zv2s.onrender.com/token" \
-H "Content-Type: application/x-www-form-urlencoded" \
-d "username=user@example.com&password=securepassword"
```


### 2. –†–∞–±–æ—Ç–∞ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏

#### POST  `/links/shorten`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–∏

```bash
curl -X POST "https://shortlink-zv2s.onrender.com/links/shorten" \
-H "Authorization: Bearer <your_jwt_token>" \
-H "Content-Type: application/json" \
-d '{"original_url": "https://example.com/very/long/url"}'
```

#### GET  `/{short_code}`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ

```bash
curl -X GET "https://shortlink-zv2s.onrender.com/abc123" -v
```

#### GET  `/links/{short_code}/stats`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Å—Å—ã–ª–∫–µ

```bash
curl -X GET "https://shortlink-zv2s.onrender.com/links/abc123/stats" \
-H "Authorization: Bearer <your_jwt_token>"
```

#### PUT  `/links/{short_code}`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏

```bash
curl -X PUT "https://shortlink-zv2s.onrender.com/links/abc123" \
-H "Authorization: Bearer <your_jwt_token>" \
-H "Content-Type: application/json" \
-d '{"original_url": "https://new-url.com"}'
```

#### DELETE  `/links/{short_code}`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏

```bash
curl -X DELETE "https://shortlink-zv2s.onrender.com/links/abc123" \
-H "Authorization: Bearer <your_jwt_token>"
```

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

#### GET  `/users/me/links`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
curl -X GET "https://shortlink-zv2s.onrender.com/users/me/links" \
-H "Authorization: Bearer <your_jwt_token>"
```

### 4. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á:

#### DELETE `/links/cleanup/expired`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∏—Å—Ç–µ–∫—à–∏—Ö —Å—Å—ã–ª–æ–∫

```bash
curl -X DELETE "https://shortlink-zv2s.onrender.com/links/cleanup/expired" \
-H "Authorization: Bearer <admin_token>"
```


#### GET  `/links/expired/history`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∏—Å—Ç–µ–∫—à–∏—Ö —Å—Å—ã–ª–æ–∫

```bash
curl -X GET "https://shortlink-zv2s.onrender.com/links/expired/history" \
-H "Authorization: Bearer <admin_token>"
```

#### GET `/links/search`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏ –ø–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É URL


```bash
curl -X GET "https://shortlink-zv2s.onrender.com/links/search?original_url=https://example.com/long/url" \
-H "Authorization: Bearer <your_jwt_token>"
```

## –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`
| –ü–æ–ª–µ            | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|-----------------|-----------|------------------------------|
| id             | Integer   | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á               |
| email          | String    | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è|
| hashed_password| String    | –•—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å          |
| created_at     | DateTime  | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏             |

### –¢–∞–±–ª–∏—Ü–∞ `links`
| –ü–æ–ª–µ          | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                      |
|--------------|-----------|-------------------------------|
| id           | Integer   | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á                |
| original_url | String    | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL              |
| short_code   | String    | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–¥       |
| created_at   | DateTime  | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è                 |
| expires_at   | DateTime  | –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)|
| user_id      | Integer   | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  |

### –¢–∞–±–ª–∏—Ü–∞ `link_stats`
| –ü–æ–ª–µ          | –¢–∏–ø       | –û–ø–∏—Å–∞–Ω–∏–µ                      |
|--------------|-----------|-------------------------------|
| id           | Integer   | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á                |
| link_id      | Integer   | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ —Å—Å—ã–ª–∫—É        |
| clicks       | Integer   | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤          |
| last_clicked_at| DateTime | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞      |



## –†–æ–ª—å Redis –≤ –ø—Ä–æ–µ–∫—Ç–µ

Redis –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–≤–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

-   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä  `@redis_cache`  –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ API
    
-   –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ (`GET /{short_code}`) —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
    
-   –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º —Å—Å—ã–ª–∫–∞–º
    

### 2. –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

-   –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—Å—ã–ª–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä  `@cache_invalidate`
    
-   –û–Ω –æ—á–∏—â–∞–µ—Ç –≤—Å–µ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏–∑–º–µ–Ω—è–µ–º–æ–π —Å—Å—ã–ª–∫–æ–π
    
-   –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π



## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker –∏ Docker Compose
    
2.  –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

4.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
    
```bash    
docker-compose up -d --build
```
    
5.  –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É  `http://localhost:8000`


## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ –∞–¥—Ä–µ—Å—É https://shortlink-zv2s.onrender.com 

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏, –≤–∫–ª—é—á–∞—è:

### üîç –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- –ù–∞–ø–∏—Å–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **pytest** 
- –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ **pytest-mock**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ —á–µ—Ä–µ–∑ **bcrypt**


# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –ø–æ–∫—Ä—ã—Ç–∏—è
```bash
pytest --cov=src --cov-report=html
```


### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

-   –ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Å –ø–æ–º–æ—â—å—é  **Locust**
    
-   –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
    
    -   –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫
        
    -   –†–µ–¥–∏—Ä–µ–∫—Ç—ã
        
    -   –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        

```bash
locust -f tests/load_test.py --host http://localhost:8000
```

## üìä Test Coverage Report

![Coverage Report](Coverage report_files/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2025-03-29 –≤ 16.46.15.png)

**Total Coverage: 92%**


